# 工程3-6 再設計に関する会話メモ（2025-10-18）

## 背景整理
- ユーザーの期待: 工程3完了後に工程4が実施され、工程5の成果物 (`rendering_ready.json`) を用いて工程6を実行する。工程6の再実行では工程5成果物のみを参照したい。
- 既存実装: `pptx gen` が工程3〜6を一括実行し、工程6が `JobSpec` を直接参照していたため、工程5の成果物を単体で再利用できなかった。
- ギャップ: 工程3/4の成果物が工程6で必要となる理由が不明瞭であり、ユーザーは工程5までで情報が完結する想定だった。

## 決定事項
- 工程5と工程6を独立 CLI (`pptx mapping` / `pptx render`) として提供し、工程6は `rendering_ready.json` のみを主要入力とする。
- `rendering_ready.json` に `job_meta` / `job_auth` を格納し、工程6で `JobSpec` を再構築できるようスキーマを拡張する。
- `pptx gen` は後方互換として残しつつ、内部で `mapping` → `render` を連鎖実行する構成へ変更する。

## メモ
- 文書化タスク: README・設計/要件ドキュメントの更新、および CLI リファレンスの追補。
- 監査対応: `audit_log.json` に `rendering_ready` のパスを記録し再実行トレースを確保する。
