# テストケースと要件の対応整理プロンプト

## 背景
- 新規・変更テストが要件を漏れなくカバーしているかをレビューする際、生成 AI に対して要件一覧とテストケースの対応を表形式で整理させたい。
- このリポジトリでは、テストの目的や想定する失敗シナリオを明示することが推奨されている（`tests/AGENTS.md` 参照）。
- 要件とテストの突合を行う依頼では、以下の情報をまとめて渡すと AI が過不足を判断しやすい。
  - 仕様／ユーザーストーリーなどの要件リスト
  - 追加・更新されたテストケースのファイルパスと概要
  - 想定している失敗シナリオやサンプルデータの位置

## 依頼テンプレート
```
新しい要件を反映したテストを追加しました。以下の情報を元に、要件とテストの対応関係を整理し、過不足を指摘してください。

### 要件
1. {要件1の説明}
2. {要件2の説明}
3. ...

### 追加・変更したテスト
- `tests/{path_to_test}`: {テストの目的や想定失敗シナリオ}
- ...

### 生成してほしい内容
1. 要件ごとにどのテストが担保しているか、箇条書きか表形式で一覧化する。
2. カバーされていない要件や、テストが重複している場合はその理由を指摘する。
3. テストで利用しているフィクスチャ／サンプルデータとその目的をまとめる。
4. 追加で検討すべきテスト観点があれば提案する。
```

## 出力イメージ
| 要件 | 該当テスト | 目的 / 失敗シナリオ | サンプルデータ | 備考 |
| ---- | ---------- | ------------------ | -------------- | ---- |
| 要件1 | `tests/test_cli_integration.py::test_export_pdf` | PDF 出力が成功しページ数が期待通りであることを検証。LibreOffice 未インストール時のフォールバックを想定。 | `samples/json/sample_spec.json` | フォールバック分岐は未テスト、追加検討。 |
| 要件2 | `tests/test_renderer.py::test_anchor_resolution` | アンカー付き図形の描画が崩れないことを確認。 | `samples/templates/layout_anchor.pptx` | - |

## 依頼時の注意ポイント
- テスト名と要件の対応が曖昧な場合は、テスト内の主要アサーションやエッジケースを補足する。
- 統合テストと単体テストの役割が分かれる場合は、重複検証か補完関係かを明記する。
- 追加テストで未カバーの要件がある場合、既存テストに該当がないかも確認するよう促す。
- 期待する出力形式（表、箇条書き、チェックリストなど）は明示し、レビュー担当者がすぐに理解できる形にする。
