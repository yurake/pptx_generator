# レンダラー リッチコンテンツ対応メモ（2025-10-05）

## 対応内容
- `RenderingOptions` に `BrandingConfig` を保持させ、ブランド設定のフォント・カラーを描画処理で直接参照。
- 画像・表・グラフそれぞれに描画ヘルパを追加し、アンカー指定またはフォールバック座標に基づいて配置。
- テーブルヘッダーには `TableStyle` の色、未指定時はブランドのプライマリカラーを適用し、ゼブラ指定時はセカンダリカラーを交互に適用。
- グラフ系列色はシリーズ個別指定を優先し、未指定時はブランドのアクセント／プライマリ／セカンダリをローテーション。
- 画像の `sizing` は `fit` / `fill` / `stretch` に対応し、プレースホルダが無い場合でもレイアウトボックスを利用して中央揃え。

## アンカーとフォールバック方針
- テンプレート上で名前付きシェイプが指定された場合は位置・サイズを取得し、描画後にプレースホルダを削除して重複を回避。
- アンカー未指定時は `RenderingOptions` のレイアウトボックス（画像 1.0x1.75 in など）を使用。
- 画像の座標・サイズを JSON 側で上書きできるよう `left_in` / `top_in` / `width_in` / `height_in` を優先。

## ブランド適用ポリシー
- タイトルはブランドの見出しフォント、本文や箇条書きは本文フォントを既定値に使用。
- テーブル本文は背景色、ゼブラ行はセカンダリカラーで塗り分け。
- グラフの軸ラベルとデータラベルは本文フォント・サイズで統一。

## テスト
- `uv run --extra dev pytest`（2025-10-05）でユニットテスト・統合テストを全通過。
