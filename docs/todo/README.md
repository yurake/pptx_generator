# ToDo ファイル運用ガイド

## 運用区分
- 大項目の進捗は `docs/roadmap/README.md` にまとめ、開発テーマ単位で状況を共有する。
- このディレクトリでは PR 単位やブランチ単位で実行可能なタスクを管理する。
- 大項目と小項目をリンクさせるため、各ファイルのメタ情報に関連テーマを記入する。
- ToDo ファイルを作業記録の唯一のソースとし、その他のチケット類は参考情報として扱う。

## 作成手順
1. タスクを計画したら `YYYYMMDD-<slug>.md` 形式で新規ファイルを作成する。コードに影響しない整備タスクでユーザーが ToDo 作成不要と明示した場合は例外的に省略できるが、判断に迷うときはユーザーへ作成要否を問い合わせる。
2. `docs/todo/template.md` をコピーし、目的や担当者などのメタ情報に加えて `roadmap_item`（例: `RM-002 エージェント運用ガイド整備`）を必ず記入する。
3. チェックボックスには「誰が・何を・どこまで」実施するかを具体的に記載し、進捗が発生したら即座にチェック状態を更新する。
4. メモ欄はタスク本文に収まりきらない背景・リスク・判断メモに限定し、進捗報告はチェックボックスのコメントで行う。

## 更新ルール
- 進捗に応じてチェックボックスを更新し、完了日時や追加メモを残す。PR 作成（ドラフト解除・更新を含む）時に `todo-auto-complete` ワークフローが未完了タスクを検出すると、head ブランチ上で「PR 作成」チェックだけを完了にし、アーカイブ移動とロードマップ更新を自動反映する（その他の未完タスクはそのまま保持される）。
- 自動化が動作しないケース（PR 本文に ToDo パスの記載がない、フォークブランチからの PR、複数テーマに跨る等）は従来通り手動で更新し、原因を `docs/notes/` 等に記録する。
- レビュー時に最新状態を共有できるよう、更新後はコミットに含める。
- 追加の作業依頼や作業内容の修正指示を受けた場合は、作業に着手する前に必ず該当 ToDo を更新し、差分を記録する。
- コミットは細かく分割し、各更新内容が履歴として追跡できるようにする。

## アーカイブ
- 作業完了後は `todo-auto-complete` が head ブランチ上で `docs/todo/archive/` へ移動し、ロードマップの該当項目を「完了テーマ」へ移す。
- 自動化対象外のケースでは手動でアーカイブを行い、必要に応じてロードマップの調整方法を `docs/notes/` に残す。
- 手動で移動する際は `git mv docs/todo/<file>.md docs/todo/archive/<file>.md` の形式で `git mv` を使用し、履歴を一貫させる。
